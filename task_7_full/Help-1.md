 cat docker-compose.yml
services:
  db:
    image: postgres:16
    environment:
      POSTGRES_USER: app
      POSTGRES_PASSWORD: app
      POSTGRES_DB: appdb
    ports:
      - "5432:5432"
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U app -d appdb"]
      interval: 3s
      timeout: 3s
      retries: 10
    volumes:
      - pgdata_task7:/var/lib/postgresql/data

  app:
    build: .
    depends_on:
      db:
        condition: service_healthy
    environment:
      POSTGRES_USER: app
      POSTGRES_PASSWORD: app
      POSTGRES_DB: appdb
      POSTGRES_HOST: db
      POSTGRES_PORT: 5432
    command: ["python", "main.py", "--help"]
    working_dir: /app
    volumes:
      - .:/app

volumes:
  pgdata_task7:



# Answer:

–°–ø–∞—Å–∏–±–æ, —Ç–µ–ø–µ—Ä—å –≤—Å—ë –≤–∏–¥–Ω–æ. –£ —Ç–µ–±—è –ø–æ—á—Ç–∏ –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ `docker-compose.yml`, –∏ —Ç—ã —É–∂–µ —É–∫–∞–∑—ã–≤–∞–µ—à—å `POSTGRES_DB: appdb`, —á—Ç–æ –æ—Ç–ª–∏—á–Ω–æ. –ù–æ –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —ç—Ç–æ, –≤ –ª–æ–≥–∞—Ö –≤—Å—ë —Ä–∞–≤–Ω–æ –≤–∏–¥–Ω–æ:

```
FATAL:  database "appdb" does not exist
```

---

### üîç –ü–æ—á–µ–º—É —Ç–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?

PostgreSQL **—Å–æ–∑–¥–∞—ë—Ç –±–∞–∑—É `appdb` —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ**, –µ—Å–ª–∏ **–¥–∞–Ω–Ω—ã—Ö –µ—â—ë –Ω–µ—Ç** –≤ `pgdata_task7`.

–ù–æ –µ—Å–ª–∏ —Ç–æ–º `pgdata_task7` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–¥–∞–∂–µ –ø—É—Å—Ç–æ–π), –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é ‚Äî –∞ –∑–Ω–∞—á–∏—Ç, –±–∞–∑–∞ `appdb` –Ω–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞.

---

### ‚úÖ –†–µ—à–µ–Ω–∏–µ: —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π volume, —á—Ç–æ–±—ã –∑–∞–Ω–æ–≤–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É

#### üìå –®–∞–≥–∏:

1. **–û—Å—Ç–∞–Ω–æ–≤–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**:

   ```bash
   docker-compose down
   ```

2. **–£–¥–∞–ª–µ–Ω–∏–µ volume, —á—Ç–æ–±—ã —Å–±—Ä–æ—Å–∏—Ç—å –±–∞–∑—É**:
   ‚ö†Ô∏è –≠—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ PostgreSQL.

   ```bash
   docker volume rm <projectname>_pgdata_task7
   ```

   –ò–ª–∏, –µ—Å–ª–∏ –Ω–µ —É–≤–µ—Ä–µ–Ω –≤ –∏–º–µ–Ω–∏:

   ```bash
   docker volume ls
   docker volume rm –∏–º—è_—Ç–æ–º–∞
   ```

3. **–ó–∞–ø—É—Å—Ç–∏ —Å–Ω–æ–≤–∞**:

   ```bash
   docker-compose up --build
   ```

–¢–µ–ø–µ—Ä—å –±–∞–∑–∞ `appdb` –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `POSTGRES_DB`, `POSTGRES_USER`, –∏ `POSTGRES_PASSWORD` —É–∫–∞–∑–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

---

### üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ú–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –≤—Å—ë, —Ç–∞–∫:

```bash
docker-compose run --rm app python main.py init
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—É `products` –∏ –¥–æ–±–∞–≤–∏—Ç 10 —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤.

---

### üîê –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –±—É–¥—É—â–µ–µ

* –î–æ–±–∞–≤—å SQL-—Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è (—Ç–∞–±–ª–∏—Ü—ã, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ —Ç.–¥.).
* –î–æ–±–∞–≤—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–∫–∞–∫ –≤—ã—à–µ –≤ `connect()`), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –µ—Å–ª–∏ –ë–î –µ—â—ë –Ω–µ –≥–æ—Ç–æ–≤–∞.

---

–•–æ—á–µ—à—å, —è —Å–≥–µ–Ω–µ—Ä–∏—Ä—É—é `create-db.sql` –∏ –æ–±–Ω–æ–≤–ª—é `docker-compose.yml` —Å –Ω—É–∂–Ω—ã–º–∏ volume –¥–ª—è SQL-–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏?
